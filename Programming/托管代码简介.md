托管代码运行于CLR之上，CLR即**通用语言运行平台**，也叫**通用语言运行时**。作为一个平台，CLR提供了以下主要功能：

- 实时编译JIT
- 垃圾回收GC
- 程序集加载
- 提供基础类库
- 内存管理
- 线程管理
- 异常管理
- 安全管理
- 类型安全检查
- 调试引擎

托管代码实际就是中间语言（MSIL）代码，这些代码无法被CPU直接执行，这是与机器码（native code）的最大区别。编译器生成的托管代码应用程序或链接库被称为程序集，当程序集运行加载时，由CLR将程序集中的托管代码实时转换成机器码，此过程称为“实时编译JIT”。这样做虽然显得大费周章，同时不可避免地造成了效率下降，但是带来跨平台等多个好处。首次编译生成的机器码将被保留在内存中，后续再次执行同一程序集将无需重复编译。程序集生成、执行流程如下图：

![程序集生成、执行流程1](https://raw.githubusercontent.com/3roman/PicBed/master/hexo/%25E7%25A8%258B%25E5%25BA%258F%25E9%259B%2586%25E7%2594%259F%25E6%2588%2590%25E3%2580%2581%25E6%2589%25A7%25E8%25A1%258C%25E6%25B5%2581%25E7%25A8%258B1.jpg)

 .NET Framework与CLR不一定一起更新。 例如，2.0、3.0 和 3.5版的 .NET Framework 都使用了 2.0版CLR 。 下表展示了 .NET Framework 与 CLR 的对应关系。

| .NET版本 | CLR版本 | CLR文件      |
| :------- | :------ | :----------- |
| 1.1      | 1.1     | mscorwks.dll |
| 2.0      | 2.0     | mscorwks.dll |
| 3.0      | 2.0     | mscorwks.dll |
| 3.5      | 2.0     | mscorwks.dll |
| 4.0      | 4.0     | clr.dll      |
| 4.5      | 4.0     | clr.dll      |

