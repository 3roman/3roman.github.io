大家在小学阶段已接触算术平均数，后来念到初中，高中，大学我们碰到了更多的平均数，那么常用的平均数有哪些，又是怎么定义的，使用上有什么讲究呢？我想，有必要整理总结下，正所谓温故而知新。

## 算术平均

在统计学意义上，算术平均分简单算术平均和加权算术平均两种，它们常用于数值型数据。

### 简单算术平均

简单算术平均最常用，这里不再累述，其定义如下：

> n个数据相加再除以n

$$
\overline{x}=\frac{\sum_{i=1}^{n}x_i}{n}=\frac{x_1+x_2+\cdots+x_i}{n}
$$



### 加权算术平均

加权算术平均考虑了个体对于整体贡献程度/重要程度（权重）的不同。如果大家的权重都一样（众生平等），加权算术平均数就等于简单算术平均数，即简单算术平均是加权算术平均的特例。加权算术平均定义如下：

> 数值与其权重乘积之和再除以所有权重的之和

$$
\overline{x}=\frac{\sum_{i=1}^{n}x_iw_i}{\sum_{i=1}^{n}w_i}=\frac{x_1w_1+x_2w_2+\cdots+x_nw_n}{w_1+w_2+\cdots+w_n}
$$

举个常见的例子，某选秀节目歌手得分由现场评委打分、现场观众打分和网络观众打分三个部分综合得到。由于观众很难判断歌手的专业水平，一般仅凭个人好恶打分。如果采用算数平均的方式，外形出众但演唱平平的歌手就很得便宜，可以预见观众分会将整体得分大幅拉高，这样对于唱的好的歌手就不公平。合理的做法是赋予不同评分体系以不同的权重，将加权算术平均数作为最终得分。

| 打分对象 | 分数 | 权重（0~1） |
| :------: | :--: | :---------: |
| 现场评委 |  90  |     0.6     |
| 现场观众 |  85  |     0.3     |
| 网络观众 |  87  |     0.1     |

时间加权算术平均数计算过程如下：
$$
C_{twa}=\frac{C_1W_1+C_2W_2+\cdots+C_nWn}{W_1+W_2+\cdots+W_n}=\frac{90\times0.6+85\times0.3+87\times0.1}{0.6+0.3+0.1}=88.2
$$
## 几何平均

几何平均一般用于品质类数据，反映了整体的平均变化率。**数据不独立，存在前后依赖关系。**

几何平均也分加权和不加权两种。之所以叫几何平均，是因为可以通过几何作图的方法求得两个数的几何平均数（平方根）。几何平均定义如下：

> n个数据相乘再开n次方

$$
\overline{x}=\sqrt[n]{x_1 x_2 \cdots x_n}
$$

为了方便理解，举个例子。工厂设有毛坯，初加工，精加工和装配4个连续作业车间，其产品合格率分别是97%，93%，99%，98.5%，求产品平均合格率。烂菜是不给上桌的，只有合格品才会被送到下一工段继续加工，因此按如下方法计算：
$$
\overline{x}=\sqrt[n]{x_1 x_2 \cdots x_n}=\sqrt[4]{0.97\times0.93\times0.99\times0.985}=0.968
$$

## 对数平均

对数平均在传热学中应用深刻，笔者接触过的有圆管一维稳态导热计算和换热器对数平均温差计算。

> 两数的差除以两数自然对数的差

$$
\overline{x}=\frac{a-b}{\ln{a}-\ln{b}}
$$

### 圆管一维稳态导热

我们来研究圆管一维稳态导热的问题，最典型的应用是隔热层厚度的计算。一段长L的保温管壳特征尺寸如下图：



![tubular_conductive_heat_transfer](https://raw.githubusercontent.com/3roman/PicBed/master/hexo/tubular_conductive_heat_transfer.png)

根据傅里叶定律，热导率方程推导过程如下：
$$
Q=-KA\frac{dt}{dr}=-K(2πrL)\frac{dt}{dr} \\
$$

$$
\Downarrow \\
$$

$$
Q\frac{1}{r}dr=-K2πLdt \\
$$

$$
\Downarrow \\
$$

$$
Q\int_{r_1}^{r_2}\frac{1}{r}dr=-K2πL\int_{t_1}^{t_2}dt \\
$$

$$
\Downarrow \\
$$

$$
Q(\ln{r_2}-\ln{r_1})=-K2πL(t_2-t_1) \\
$$

$$
\Downarrow \\
$$

$$
Q=-K2πL\frac{t_2-t_1}{\ln{r_2}-\ln{r_1}}=-K(2π\cdot\frac{r_2-r_1}{\ln{r_2}-\ln{r_1}} \cdot L)(\frac{t_2-t_1}{r_2-r_1})
$$

从上式可知，圆管一维稳态导热计算中圆管换热面积根据对数平均半径获得。

### 对数平均温差

换热器中冷热流体的温差呈指数型变化规律[^1]，因此对数平均温差（LMTD）相对于算术平均温差更精确。

![LMTD](https://raw.githubusercontent.com/3roman/PicBed/master/hexo/LMTD.png)

上图 LMTD 计算结果如下：
$$
LMTD=\frac{\Delta T_a-\Delta T_b}{\ln{\Delta T_a}-\ln{\Delta T_b}}=\frac{40-4}{\ln{40}-\ln{4}}=15.6
$$

[^1]: [Log Mean Temperature Difference](https://www.omnicalculator.com/physics/lmtd)
[^2]: [在热带遇见平均数](http://tw.classf0001.uschoolnet.com/css000000237536/cm4k-1489068565-6972-9931.pdf)
